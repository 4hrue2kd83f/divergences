je_south_german_confederation_aus = {
	icon = "gfx/interface/icons/invention_icons/pan_nationalism.dds"
	should_be_pinned_by_default = yes

	group = je_group_foreign_affairs

	immediate = {
		c:AUS = {
			save_scope_as = scope_AUS
		}
		c:BAV = {
			save_scope_as = scope_BAV
		}
		
	}

	complete = {
		custom_tooltip = {
			text = je_slovene_seperatism_complete_tooltip
			has_variable = je_slovene_seperatism_complete
		}
		OR = {
			
			AND = {
				custom_tooltip = {
					text = je_south_german_confederation_aus_bavaria_defeated_tooltip
					NOT = { exists = c:BAV }
				}
				owns_entire_state_region = STATE_BAVARIA
				owns_entire_state_region = STATE_TYROL
			}
			
			c:BAV = { is_subject_of = root}	

		}

		
	}

	on_complete = {
		if = {
			limit = { 
				exists = c:AGR
				OR = {
					c:AGR = { is_subject_of = c:BAV}
					c:AGR = { is_subject_of = c:AUS}	
				}
				
			}
			annex = c:AGR
		}

		if = {
			limit = { 
				exists = c:SLZ
				OR = {
					c:SLZ = { is_subject_of = c:BAV}
					c:SLZ = { is_subject_of = c:AUS}	
				}
				
			}
			annex = c:SLZ
		}

		if = {
			limit = { 
				exists = c:TRT
				OR = {
					c:TRT = { is_subject_of = c:BAV}
					c:TRT = { is_subject_of = c:AUS}	
				}
				
			}
			annex = c:TRT
		}

		if = {
			limit = { 
				exists = c:BAV
				c:BAV = { is_subject_of = c:AUS}
			}
			annex = c:BAV
		}

		change_tag = SGF

		trigger_event = dvg_sgf.1
	}

}


je_slovene_seperatism = {
	icon = "gfx/interface/icons/invention_icons/pan_nationalism.dds"
	should_be_pinned_by_default = yes

	group = je_group_internal_affairs


	complete = {
		OR = {
			custom_tooltip = {
				text = je_slovene_seperatism_complete_tooltip
				has_variable = je_slovene_seperatism_complete
			}
			game_date >= 1840.10.17
		}
		
	}

	fail = {
		OR = {

			s:STATE_SLOVENIA = {
				region_state:AUS ?= {
					radical_fraction = {
						value >= 0.6
					}
				}
			}

			NOT = { owns_entire_state_region = STATE_SLOVENIA }
		}
		
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = dvg_austria.31
			10 = dvg_austria.32
			10 = dvg_austria.33
			10 = dvg_austria.34
		}
	}

	on_fail = {

		if = {
			limit = { 
				c:AUS = { 
					NOT = { has_variable = dvg_austria_slovene_war }
				} 	
			}
			trigger_event = dvg_austria.41  ### Slovene uprising
		}
		
	}

	on_complete = {
		trigger_event = dvg_austria.50  ### The Ausgleich
	}

}

je_habsburg_monarchy = {
	icon = "gfx/interface/icons/invention_icons/pan_nationalism.dds"
	should_be_pinned_by_default = yes

	group = je_group_internal_affairs


	immediate = {
		trigger_event = { id = dvg_austria.3 days = 60 }
	}

	fail = {
		NOT = {
			has_law = law_type:law_monarchy
		}
	}

	on_fail = {
		#trigger_event = dvg_austria.  ### The last of the Habsburgs
	}
}


je_austrian_yugoslavia = {
	icon = "gfx/interface/icons/invention_icons/pan_nationalism.dds"
	should_be_pinned_by_default = yes

	group = je_group_internal_affairs


	immediate = {
		s:STATE_CROATIA = {
			save_scope_as = dvg_croatia_scope
		}

		c:SLO ?= {
			save_scope_as = dvg_SLO_scope
		}
				
	}

	fail = {
		custom_tooltip = {
			text = dvg_free_yugoslavia_exists
			c:YUG ?= {
				exists = yes
				NOT = { is_subject_of = c:AUS } 
			}
		}

		custom_tooltip = {
			text = dvg_free_slovenia_exists
			c:SLO ?= {
				exists = yes
				NOT = { is_subject_of = c:AUS } 
			}
		}

		custom_tooltip = {
			text = dvg_no_slovenia
			OR = {
				c:SLO ?= {
					NOT = { exists = yes } 
				}
				NOT = {
					country_or_subject_owns_entire_state_region = STATE_SLOVENIA
				}
			}
			
		}
		

		
	}

	complete = {
		has_technology_researched = nationalism


		custom_tooltip = {
			text = dvg_austria_owns_croatia
			country_or_subject_owns_entire_state_region = STATE_CROATIA
		}

		any_state = {
			filter = {
				region = sr:region_balkans
				state_region = {
					OR = {
						is_homeland = cu:serb
						is_homeland = cu:slovene
						is_homeland = cu:croat
						#is_homeland = cu:albanian
					}
					
				}
			}
			custom_tooltip = {
				text = owned_by_this_country_or_subjects_tt
				OR = {
					owner = ROOT
					owner = {
						is_subject_of = ROOT
					}
				}
			}
			percent >= 0.6
		}
	}


	on_complete = {

		if = {
			limit = { exists = c:SLO }

			c:SLO = {
				add_primary_culture = cu:serb
				add_primary_culture = cu:croat
			}

			custom_tooltip = {
				text = dvg_austrian_yuoslavia
				every_state = {
					limit = {
						region = sr:region_balkans
						state_region = {
							OR = {
								is_homeland = cu:serb
								is_homeland = cu:slovene
								is_homeland = cu:croat
								#is_homeland = cu:albanian
							}
							
						}
						OR = {
							owner = ROOT
							owner = {
								is_subject_of = ROOT
							}
						}
					}
		
					set_state_owner = c:SLO
				}
			}

			c:SLO = {
				change_tag = YUG
			}
			
			

			hidden_effect = {
				if = {
					limit = { owns_entire_state_region = STATE_ISTRIA }

					random_scope_state = {
						limit = {
							state_region = s:STATE_ISTRIA
						}
						set_state_owner = c:YUG
					}
				}
			}

			
		}
		

	

	}



}