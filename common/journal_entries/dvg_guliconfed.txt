je_found_yushan = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	complete = {
		any_scope_state = {
			state_region = s:STATE_YONGLING
			any_scope_building = {
				is_building_type = building_government_administration
				occupancy >= 0.2
			}
		}
	}
	
	on_complete = {
		trigger_event = { id = dvg_guliconfed.2 }
		set_variable = dvg_yushan_founded_var
	}
	
	fail = {
		any_scope_state = {
			state_region = s:STATE_YONGLING
			is_capital = no
		}
	}
	
	weight = 100
	
	should_be_pinned_by_default = yes

}

je_yaluo_approval = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"	

	complete = {
		custom_tooltip = {
			text = dvg_yaluo_approve_of_guli_tt
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}
	
	fail = {
		custom_tooltip = {
			text = dvg_yaluo_dont_approve_of_guli_tt
			root.var:dvg_yaluo_approval_of_guli_var <= 0
		}
	}
	
	
	on_complete = {
		IF = {
			has_variable = {
				name = dvg_guli_identity_var
				value >=15
			}
			trigger_event = { id = dvg_guliconfed.5 }
		}
		ELSE = {
			trigger_event = { id = dvg_guliconfed.6 }
		}
	}
	

	on_fail = {
	#	trigger_event = { id = dvg_guliconfed. }
	}

	current_value = {
		value = root.var:dvg_yaluo_approval_of_guli_var
	}

	goal_add_value = {
		add = 14
	}
	
	progressbar = yes

	weight = 100
	should_be_pinned_by_default = yes
}

je_guli_identity = {

	complete = {
		custom_tooltip = {
			text = dvg_guli_identity_good_ending_tt
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}
	
	fail = {
		custom_tooltip = {
			text = dvg_guli_identity_bad_ending_tt
			root.var:dvg_guli_identity_var <= 0
		}
	}
	
	on_complete = {

	}
	
	on_fail = {
		custom_tooltip = {
			text = dvg_guli_identity_bad_ending_perks_tt
		}
		#trigger_event = { id = dvg_guliconfed. }
	}	
	
	goal_add_value = {
		add = 25
	}	
	
	current_value = {
		value = root.var:dvg_guli_identity_var
	}
	
	progressbar = yes

	weight = 100
	should_be_pinned_by_default = yes
}

je_guli_language = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	complete = {
		has_technology_researched = academia	
	}
	
	on_complete = {
		trigger_event = { id = dvg_guliconfed.3 }
	}

	should_be_pinned_by_default = yes
}

je_guli_language_mandarin_spreading = {

	complete = {
		literacy_rate > 0.45
	}
	
	should_be_pinned_by_default = yes
}

je_guli_language_local_language_spreading = {
	
	fail = {
		custom_tooltip = {
		text = dvg_guli_langauge_vetoed_tt	
		has_variable = dvg_guli_speaking_mandarin_var
		}
	}
	
	complete = {
		literacy_rate > 0.45
	}
	
	should_be_pinned_by_default = yes

}

je_guli_religion_is_a_thing = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	on_monthly_pulse = {
		random_events = {
			50 = 0
			30 = dvg_guliconfed.200 #Buddhism spreading amongst urban tribes
			45 = dvg_guliconfed.201 #Berrin Stupa
			50 = dvg_guliconfed.202 #Fund the preservationists?
			100 = dvg_guliconfed.203 #Religious Schools - this event should be exceptionally likely due to laws being v hard
			45 = dvg_guliconfed.204 #Mandarin making Buddhism easier to access
			45 = dvg_guliconfed.205 #Preservationist and Monk fight in the streets
			45 = dvg_guliconfed.206 #Syncretism spreads
		}
	}
	
	is_shown_when_inactive = {
		exists = c:KOO
		root = c:KOO
		NOT = {
			c:KOO = {
				has_variable = dvg_guli_religion_complete_var
			}
		}
	}
	
	possible = {
		literacy_rate > 0.2
		OR = {
			ig:ig_devout = {
				ig_clout >= 0.15
			}
			AND = {
				ig:ig_devout = {
					ig_clout >= 0.05
				}
				year >= 1853
				#This is to account for getting really terrible RNG with devout leaders and just sucking hard at getting them popular
			}
		}
		NOT = {
			OR = {
				has_law = law_type:law_total_separation
				has_law = law_type:law_state_atheism
			}
		}
	}
	
	complete = { #Ideally this'd be 3 JEs, but that'd get messy fast with all the research-based ones in there
		custom_tooltip = {
			text = dvg_guli_religion_question_is_joever_tt
			c:KOO = {
				OR = {
					has_variable = {
						name = dvg_guli_religion_full_mahayana_var
						value = 6
					}
					has_variable = {
						name = dvg_guli_religion_moderate_var
						value = 6
					}
					has_variable = {
						name = dvg_guli_religion_full_dreamtime_var
						value = 6
					}
				}
			}
		}
	}
	
	on_complete = {
		set_variable = {
			name = dvg_guli_religion_complete_var
		}
		IF = {
			limit = {
				c:KOO = {
					has_variable = {
						name = dvg_guli_religion_full_mahayana_var
						value = 6
					}
				}
			}
			#trigger_event = { id = dvg_guliconfed. }
		}
		IF = {
			limit = {
				c:KOO = {
					has_variable = {
						name = dvg_guli_religion_full_moderate_var
						value = 6
					}
				}
			}
			#trigger_event = { id = dvg_guliconfed. }
		}
		IF = {
			limit = {
				c:KOO = {
					has_variable = {
						name = dvg_guli_religion_full_dreamtime_var
						value = 6
					}
				}
			}
			#trigger_event = { id = dvg_guliconfed. }
		}
	}
	should_be_pinned_by_default = yes
}

je_yaluo_approval_for_yaluo = {

	icon = "gfx/interface/icons/event_icons/event_scales.dds"	

	current_value = {
		value = root.var:dvg_yaluo_approval_of_guli_for_yaluo_var
	}

	goal_add_value = {
		add = 14
	}
	
	progressbar = yes

	should_be_pinned_by_default = yes
}

je_cool_burning_question = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"
	
	is_shown_when_inactive = {
		exists = c:KOO
		root = c:KOO
	}	
	
	complete = {
		has_technology_researched = intensive_agriculture
	}	
	
	on_complete = {
		trigger_event = { id = dvg_guliconfed.14 }
	}
}