### Author: Kallar ###

namespace = dvg_bavaria

#### Bavarian Startup Event ####

dvg_bavaria.1 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.1.t
    desc = dvg_bavaria.1.d
    flavor = dvg_bavaria.1.f


    option = {
        name = dvg_bavaria.1.a
        default_option = yes

        add_journal_entry = { type = je_bavarian_constitution }
        add_journal_entry = { type = je_south_german_confederation_bav }
        add_journal_entry = { type = je_holy_roman_empire }


    }

}


### Constitution Events

### Religious rights
dvg_bavaria.2 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.2.t
    desc = dvg_bavaria.2.d
    flavor = dvg_bavaria.2.f

    immediate = {
        set_variable = dvg_bav_constitution_religion

        trigger_event = {
            id = dvg_bavaria.3
            years = 1
        }
    }

    option = { # Freedom of Coincidence
        name = dvg_bavaria.2.a
        default_option = yes

        trigger = {
            NOT = { has_law = law_type:law_freedom_of_conscience }
        }

        activate_law = law_type:law_freedom_of_conscience
        add_radicals = {
            value = medium_radicals # 0.05
            religion = rel:catholic
        }

    }

    option = { # State Religion
        name = dvg_bavaria.2.b

        trigger = {
            NOT = { has_law = law_type:law_state_religion }
        }

        activate_law = law_type:law_freedom_of_conscience
        add_loyalists = {
            value = medium_radicals # 0.05
            religion = rel:catholic
        }
    }

    option = { # Dont change anything
        name = dvg_bavaria.2.c

    }

}

### Voting Rights
dvg_bavaria.3 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.3.t
    desc = dvg_bavaria.3.d
    flavor = dvg_bavaria.3.f

    immediate = {
        remove_variable = dvg_bav_constitution_religion
        set_variable = dvg_bav_constitution_voting

        trigger_event = {
            id = dvg_bavaria.4
            years = 1
        }
    }

    option = { # Landed Voting
        name = dvg_bavaria.3.a
        default_option = yes

        trigger = {
            NOT = { has_law = law_type:law_landed_voting }
        }

        activate_law = law_type:law_landed_voting
        add_loyalists = {
            value = medium_radicals # 0.05
            pop_type = aristocrats
        }


    }

    option = { # Wealth Voting
        name = dvg_bavaria.3.b

        trigger = {
            NOT = { has_law = law_type:law_wealth_voting }
        }

        activate_law = law_type:law_wealth_voting
        add_radicals = {
            value = medium_radicals # 0.05
            pop_type = aristocrats
        }


    }

    option = { # Dont change anything
        name = dvg_bavaria.3.c


    }

}

### Cultural Rights
dvg_bavaria.4 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.4.t
    desc = dvg_bavaria.4.d
    flavor = dvg_bavaria.4.f

    immediate = {
        remove_variable = dvg_bav_constitution_voting
        set_variable = dvg_bav_constitution_culture
    }

    option = { # National Supremacy
        name = dvg_bavaria.4.a
        default_option = yes

        trigger = {
            NOT = { has_law = law_type:law_national_supremacy }
        }

        activate_law = law_type:law_national_supremacy
        add_loyalists = {
            value = medium_radicals # 0.05
            pop_type = aristocrats
        }

        set_variable = dvg_bavarian_constitution_complete

    }

    option = { # Racial Segregation
        name = dvg_bavaria.4.b

        trigger = {
            NOT = { has_law = law_type:law_racial_segregation }
        }

        activate_law = law_type:law_racial_segregation
        add_radicals = {
            value = medium_radicals # 0.05
            pop_type = aristocrats
        }

        set_variable = dvg_bavarian_constitution_complete
    }

    option = { # Dont change anything
        name = dvg_bavaria.4.c

        set_variable = dvg_bavarian_constitution_complete
    }

}

### Misc Constitution events

### Karsbad Tag
dvg_bavaria.5 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.5.t
    desc = dvg_bavaria.5.d
    flavor = dvg_bavaria.5.f

    trigger = {
        has_journal_entry = je_bavarian_constitution
        NOT = { has_variable = dvg_bav_karsbad }
    }

    immediate = {
        set_variable = dvg_bav_karsbad
    }

    option = {
        name = dvg_bavaria.5.a
        default_option = yes

        increase_bav_liberal_anger = yes
    }

    option = {
        name = dvg_bavaria.5.b

        add_radicals = {
            value = medium_radicals # 0.05
            pop_type = aristocrats
        }

    }


}

### Insbruck Festival
dvg_bavaria.6 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.6.t
    desc = dvg_bavaria.6.d
    flavor = dvg_bavaria.6.f

    trigger = {
        has_journal_entry = je_bavarian_constitution
        NOT = { has_variable = dvg_bav_insbruck }
    }

    immediate = {
        set_variable = dvg_bav_insbruck
    }

    option = { # Imprison them
        name = dvg_bavaria.6.a
        default_option = yes

        add_radicals = {
            value = 0.05
            pop_type = peasants
        }

        increase_bav_liberal_anger = yes
    }

    option = { # A commendable initiative
        name = dvg_bavaria.6.b

        add_radicals = {
            value = 0.05
            pop_type = aristocrats
        }

    }


}

### Das Junge Deutschland
dvg_bavaria.7 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.7.t
    desc = dvg_bavaria.7.d
    flavor = dvg_bavaria.7.f

    trigger = {
        has_journal_entry = je_bavarian_constitution
        NOT = { has_variable = dvg_bav_junges_deutschland }
    }

    immediate = {
        set_variable = dvg_bav_junges_deutschland
    }

    option = { ### Release them
        name = dvg_bavaria.7.a
        default_option = yes

        add_radicals = {
            value = 0.20
            pop_type = aristocrats
        }

    }

    option = { ### Treason is treason
        name = dvg_bavaria.7.b

        add_radicals = {
            value = 0.10
            pop_type = peasants
        }

        increase_bav_liberal_anger = yes

    }


}

### The Ducal Pamphlet
dvg_bavaria.8 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.8.t
    desc = dvg_bavaria.8.d
    flavor = dvg_bavaria.8.f

    trigger = {
        has_journal_entry = je_bavarian_constitution
        NOT = { has_variable = dvg_bav_ducal_pamphlet }
    }

    immediate = {
        set_variable = dvg_bav_ducal_pamphlet
    }

    option = {
        name = dvg_bavaria.8.a
        default_option = yes

        decrease_bav_liberal_anger = yes
    }


    option = {
        name = dvg_bavaria.8.b

        add_loyalists = {
            value = 0.20
            pop_type = aristocrats
        }

    }


}

### Street Violence in Munich
dvg_bavaria.9 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.9.t
    desc = dvg_bavaria.9.d
    flavor = dvg_bavaria.9.f

    trigger = {
        has_journal_entry = je_bavarian_constitution
        NOT = { has_variable = dvg_bav_violence_in_munich }
    }

    immediate = {
        set_variable = dvg_bav_violence_in_munich
    }

    option = {
        name = dvg_bavaria.9.a
        default_option = yes

        add_loyalists = {
            value = 0.20
        }

        increase_bav_liberal_anger = yes

    }


    option = {
        name = dvg_bavaria.9.b

        decrease_bav_liberal_anger = yes
    }


}

### Conservative Scandal
dvg_bavaria.10 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.10.t
    desc = dvg_bavaria.10.d
    flavor = dvg_bavaria.10.f

    trigger = {
        has_journal_entry = je_bavarian_constitution
        NOT = { has_variable = dvg_bav_conservative_scandal }
    }

    immediate = {
        set_variable = dvg_bav_conservative_scandal
    }

    option = {
        name = dvg_bavaria.10.a
        default_option = yes

        increase_bav_liberal_anger = yes

    }



}

### The trial of Rosenheim
dvg_bavaria.11 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.11.t
    desc = dvg_bavaria.11.d
    flavor = dvg_bavaria.11.f

    trigger = {
        has_journal_entry = je_bavarian_constitution
        NOT = { has_variable = dvg_bav_rosenheim_trial }
    }

    immediate = {
        set_variable = dvg_bav_rosenheim_trial
    }

    option = {
        name = dvg_bavaria.11.a
        default_option = yes

        increase_bav_liberal_anger = yes

    }

    option = {
        name = dvg_bavaria.11.b

        decrease_bav_liberal_anger = yes
    }

}
#### 12-24 For possible future constitution events ###

#### The Bavarian Constitution
dvg_bavaria.25 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.25.t
    desc = dvg_bavaria.25.d
    flavor = dvg_bavaria.25.f

    option = {
        name = dvg_bavaria.25.a
        default_option = yes

        add_modifier = {
            name = dvg_bavarian_constitution
        }

    }

}

#### The Munich Coup
dvg_bavaria.26 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.26.t
    desc = dvg_bavaria.26.d
    flavor = dvg_bavaria.26.f

    immediate = {
        set_variable = dvg_bavarian_constitution_complete
    }

    option = {
        name = dvg_bavaria.26.a
        default_option = yes

        activate_law = law_type:law_universal_suffrage
        activate_law = law_type:law_parliamentary_republic
        activate_law = law_type:law_total_separation
        activate_law = law_type:law_right_of_assembly
        activate_law = law_type:law_dedicated_police

        add_modifier = {
            name = dvg_munich_coup
            years = 5
            is_decaying = yes
        }

        add_radicals = {
            value = 0.80
            interest_group = ig:ig_landowners
        }


        set_global_variable = dvg_liberal_bavaria
    }

    option = {
        name = dvg_bavaria.26.b

        add_radicals = {
            value = 0.60
        }

    }

}

### 27-29 Possible endings for constitution

### A Meeting in Salzburg
dvg_bavaria.30 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.30.t
    desc = dvg_bavaria.30.d
    flavor = dvg_bavaria.30.f

    option = {
        name = dvg_bavaria.30.a
        default_option = yes

        set_variable = dvg_bav_aus_diplomatic

        c:AUS = {
            set_variable = dvg_bav_aus_diplomatic
            trigger_event = dvg_bavaria.31
        }
    }

    option = {
        name = dvg_bavaria.30.b

        set_variable = dvg_bav_aus_direct

        c:AUS = {
            set_variable = dvg_bav_aus_direct
            trigger_event = dvg_bavaria.31
        }
    }

}

### A Meeting in Salzburg ( AUS )
dvg_bavaria.31 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.31.t
    desc = dvg_bavaria.31.d
    flavor = dvg_bavaria.31.f

    option = {
        name = dvg_bavaria.31.a
        default_option = yes

        trigger = {
            has_variable = dvg_bav_aus_diplomatic
        }

        c:BAV = {
            create_diplomatic_pact = {
                country = c:AUS
                type = puppet
            }
        }

		ai_chance = {
			base = 90
			modifier = { ### Dont negotiate with terr... rebels
				has_global_variable = dvg_liberal_bavaria
				add = -1000
			}

			modifier = { ### Ask for monarchy instead
				c:BAV = {NOT = { has_law = law_type:law_monarchy }}
           		c:AUS = { has_law = law_type:law_monarchy }
				add = -1000 
			}	
		}
    }

    option = {
        name = dvg_bavaria.31.b

        trigger = {
            has_variable = dvg_bav_aus_diplomatic
        }

        ai_chance = {
			base = 10
        }
    }

    option = {
        name = dvg_bavaria.31.c

        trigger = {
            has_variable = dvg_bav_aus_direct
        }

        trigger_event = dvg_bavaria.32

		ai_chance = {
			base = 50
        }
    }

    option = {
        name = dvg_bavaria.31.d

        trigger = {
            has_variable = dvg_bav_aus_direct
        }

        c:BAV = {
            create_diplomatic_pact = {
                country = c:AUS
                type = puppet
            }
        }

		ai_chance = {
			base = 50
        }
    }

    ### special case if bavaria has no monarchy

    option = {
        name = dvg_bavaria.31.e

        trigger = {
            has_variable = dvg_bav_aus_diplomatic
            c:BAV = {NOT = { has_law = law_type:law_monarchy }}
            c:AUS = { has_law = law_type:law_monarchy }
        }

        c:BAV = {
            trigger_event = { id = dvg_bavaria.33 days = 6 }
        }

		ai_chance = {
			base = 200
			modifier = {
				has_global_variable = dvg_liberal_bavaria
				add = -1000
			}
        }
    }

}

### Der Donau Bruderkrieg
dvg_bavaria.32 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.32.t
    desc = dvg_bavaria.32.d
    flavor = dvg_bavaria.32.f

    option = {
        name = dvg_bavaria.32.a
        default_option = yes


        trigger = {
            exists = c:BAV
            this = c:BAV
        }

        set_variable = dvg_bav_aus_brothers_war

        c:AUS = {
            set_variable = dvg_bav_aus_brothers_war
            trigger_event = dvg_bavaria.32
        }

        create_diplomatic_play = {
            type = dp_annex_war
            target_country = c:AUS

            add_war_goal = { holder = c:AUS target_country = c:BAV type = annex_country }

            escalation = 80
        }

    }

    option = {
        name = dvg_bavaria.32.b

        trigger = {
            exists = c:BAV
            this = c:BAV
        }
    }

    option = {
        name = dvg_bavaria.32.c

        trigger = {
            exists = c:AUS
            this = c:AUS
        }
    }

}

dvg_bavaria.33 = {

    event_image = { video = "unspecific_military_parade" }
    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"
    duration = 1

    placement = ROOT
    type = country_event

    title = dvg_bavaria.33.t
    desc = dvg_bavaria.33.d
    flavor = dvg_bavaria.33.f

    option = {
        name = dvg_bavaria.33.a
        default_option = yes

        activate_law = law_type:law_monarchy

        add_radicals = {
            value = 0.6
        }

        if = {
            limit = { player = c:AUS  }
            c:AUS = {
                create_diplomatic_pact = {
                    country = c:BAV
                    type = puppet
                }
            }
        }
        else = {
            c:BAV = {
                create_diplomatic_pact = {
                    country = c:AUS
                    type = puppet
                }
            }
        }




    }

    option = {
        name = dvg_bavaria.33.b

        trigger_event = { id = dvg_bavaria.32 days = 6 }
    }


}