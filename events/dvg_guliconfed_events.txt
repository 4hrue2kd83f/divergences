namespace = dvg_guliconfed

dvg_guliconfed.1 = { #Opening event
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.1.t
	desc = dvg_guliconfed.1.d
	flavor = dvg_guliconfed.1.f
	
	event_image = {
		video = "gfx/event_pictures/unspecific_signed_contract.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/signed_contract"
	
	duration = 3
	
	immediate = {
		set_variable = {
			name = dvg_yaluo_approval_of_guli_var
			value = 1
		}
		set_variable = {
			name = dvg_guli_religion_full_mahayana_var
			value = 0
		}
		set_variable = {
			name = dvg_guli_religion_moderate_var
			value = 0
		}
		set_variable = {
			name = dvg_guli_religion_full_dreamtime_var
			value = 0
		}
	}
	
	option = {
		name = dvg_guliconfed.1.a
		default_option = yes
		add_journal_entry = {
			type = je_found_yushan
		}
		add_journal_entry = {
			type = je_yaluo_approval
		}
		add_journal_entry = {
			type = je_guli_identity
		}
		set_variable = {
			name = dvg_guli_identity_var
			value = 15
		}
		change_variable = {
			name = dvg_yaluo_approval_of_guli_var
			add = 4
		}
		hidden_effect = {
			c:YLO = {
				trigger_event = { id = dvg_guliconfed.10 days = 7 }
			}
		}
	}
}

dvg_guliconfed.2 = { #Founded Yushan
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.2.t
	desc = dvg_guliconfed.2.d
	flavor = dvg_guliconfed.2.f
	
	event_image = {
		video = "gfx/event_pictures/unspecific_signed_contract.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/signed_contract"

	duration = 2
	
	immediate = {
		set_variable = dvg_yushan_founded
	}
	
	option = {
		name = dvg_guliconfed.2.a
		default_option = yes
		add_journal_entry = {
			type = je_guli_language
		}
	}
}

dvg_guliconfed.3 = { #selecting a language
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.3.t
	desc = dvg_guliconfed.3.d
	flavor = dvg_guliconfed.3.f
	
	event_image = {
		video = "gfx/event_pictures/unspecific_signed_contract.bk2"
	}
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"	
	
	duration = 2
	
	option = { #Mandarin
		name = dvg_guliconfed.3.a
		change_relations = { 
			country = c:YLO
			value = 30
		}
		add_modifier = {
			name = dvg_guli_mandarin
		}
		default_option = yes
		change_variable = {
			name = dvg_yaluo_approval_of_guli_var
			add = 1
		}
		change_variable = {
			name = dvg_guli_identity_var
			add = -2
		}
		set_variable = {
			name = dvg_guli_speaking_mandarin_var
		}
		add_journal_entry = {
			type = je_guli_language_mandarin_spreading
		}
	}

	option = { #Kulin
		name = dvg_guliconfed.3.b
		add_modifier = {
			name = dvg_favouring_tribe
			is_decaying = yes
			months = 61
		}
		add_modifier = {
			name = dvg_guli_tribal_language
		}
		change_variable = {
			name = dvg_guli_identity_var
			add = 1
		}
		hidden_effect = {
			c:YLO = {
				trigger_event = { id = dvg_guliconfed.11 days = 7 }
			}
		}
		set_variable = {
			name = dvg_guli_speaking_local_language_var
		}
		add_journal_entry = {
			type = je_guli_language_local_language_spreading
		}
	}
	
	option = { #Yorta-Yorta
		name = dvg_guliconfed.3.c
		add_modifier = {
			name = dvg_favouring_tribe
			is_decaying = yes
			months = 61
		}
		add_modifier = {
			name = dvg_guli_tribal_language
		}
		change_variable = {
			name = dvg_guli_identity_var
			add = 1
		}
		hidden_effect = {
			c:YLO = {
				trigger_event = { id = dvg_guliconfed.11 days = 7 }
			}
		}
		set_variable = {
			name = dvg_guli_speaking_local_language_var
		}
		add_journal_entry = {
			type = je_guli_language_local_language_spreading
		}
	}
	
	option = { #Yuyu
		name = dvg_guliconfed.3.da
		add_modifier = {
			name = dvg_favouring_tribe
			is_decaying = yes
			months = 61
		}	
		add_modifier = {
			name = dvg_guli_tribal_language
		}
		change_variable = {
			name = dvg_guli_identity_var
			add = 1
		}
		hidden_effect = {
			c:YLO = {
				trigger_event = { id = dvg_guliconfed.11 days = 7 }
			}
		}
		set_variable = {
			name = dvg_guli_speaking_local_language_var
		}
		add_journal_entry = {
			type = je_guli_language_local_language_spreading
		}
	}
	
	option = { #Warki
		name = dvg_guliconfed.3.e
		add_modifier = {
			name = dvg_favouring_tribe
			is_decaying = yes
			months = 61
		}
		add_modifier = {
			name = dvg_guli_tribal_language
		}
		change_variable = {
			name = dvg_guli_identity_var
			add = 1
		}
		hidden_effect = {
			c:YLO = {
				trigger_event = { id = dvg_guliconfed.11 days = 7 }
			}
		}
		set_variable = {
			name = dvg_guli_speaking_local_language_var
		}
		add_journal_entry = {
			type = je_guli_language_local_language_spreading
		}
	}
	
	option = { #No language!
		custom_tooltip = {
			text =  dvg_guli_language_decision_tt
		}
		name = dvg_guliconfed.3.fa
		hidden_effect = {
			set_variable = dvg_guli_no_language_yet
			IF = {
				limit = {
				has_variable = dvg_pick_a_language_taken
				}
				remove_variable = dvg_pick_a_language_taken
			}
		}
	}
	
	duration = 2
}

dvg_guliconfed.4 = { #yushan agency
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.4.t
	desc = dvg_guliconfed.4.d
	flavor = dvg_guliconfed.4.f
	
	event_image = {
		video = "europenorthamerica_capitalists_meeting"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	duration = 2
	
	option = {
		add_modifier = {
			name = dvg_yushan_agency
			months = 61
		}
	name = dvg_guliconfed.4.a
	default_option = yes
	}
	
	option = {
		custom_tooltip = {
			text = dvg_guli_no_yushan_agency_yet_tt
		}
		hidden_effect = {
			remove_variable = dvg_yushan_agency_taken
		}
	name = dvg_guliconfed.4.b
	}
}

dvg_guliconfed.5 = { #Yaluo approves of us - not Hongshan
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.5.t
	desc = dvg_guliconfed.5.d
	flavor = dvg_guliconfed.5.f
	
	event_image = {
		video = "gfx/event_pictures/asia_politician_parliament_motion.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	duration = 2
	
	option = {
		name = dvg_guliconfed.5.a
		add_modifier = {
			name = dvg_yaluo_backing_guli
			months = -1
		}
	}
	
}

dvg_guliconfed.6 = { #Yaluo approves of us - Hongshan
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.6.t
	desc = dvg_guliconfed.6.d
	flavor = dvg_guliconfed.6.f
	
	event_image = {
		video = "gfx/event_pictures/asia_politician_parliament_motion.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	duration = 2
	
	option = {
		name = dvg_guliconfed.6.a
		add_modifier = {
			name = dvg_yaluo_backing_guli
			months = -1
		}
	}
}

dvg_guliconfed.7 = { #Event for Yaluo when requesting the rest of Yongling
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.7.t
	desc = dvg_guliconfed.7.d
	flavor = dvg_guliconfed.7.f
	
	event_image = {
		video = "gfx/event_pictures/asia_politician_parliament_motion.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	duration = 2
	
	option = {
		c:KOO = {
			trigger_event = { id = dvg_guliconfed.8 days = 20 }
		}
		name = dvg_guliconfed.7.a
		default_option = yes
	}
	
	option = {
		c:KOO = {
			trigger_event = { id = dvg_guliconfed.9 days = 20 }
		}
		name = dvg_guliconfed.7.b
	}
}

dvg_guliconfed.8 = { #No from Yaluo
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.8.t
	desc = dvg_guliconfed.8.d
	flavor = dvg_guliconfed.8.f
	
	event_image = {
		video = "gfx/event_pictures/unspecific_politicians_arguing.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	event_image = {
		video = "unspecific_military_parade"
	}

	duration = 2
	
	option = {
		name = dvg_guliconfed.8.a
	}
}

dvg_guliconfed.9 = { #Yes from Yaluo
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.9.t
	desc = dvg_guliconfed.9.d
	flavor = dvg_guliconfed.9.f
	
	duration = 2
	
	event_image = {
		video = "unspecific_military_parade"
	}
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	option = {
		s:STATE_YONGLING.region_state:YLO = {
			set_state_owner = c:KOO
		}
		name = dvg_guliconfed.9.a
	}
}

dvg_guliconfed.10 = { #Event for Yaluo that spawns the approval JE for them
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.10.t
	desc = dvg_guliconfed.10.d
	flavor = dvg_guliconfed.10.f
	
	duration = 2
	
	event_image = {
		video = "gfx/event_pictures/asia_politician_parliament_motion.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	immediate = {
		set_variable = {
			name = dvg_yaluo_approval_of_guli_for_yaluo_var
			value = 1
		}

	}
	
	option = {
		custom_tooltip = {
			text = dvg_yaluo_approval_of_guli_for_yaluo_tt
		}
		add_journal_entry = {
			type = je_yaluo_approval_for_yaluo
		}
		change_variable = {
			name = dvg_yaluo_approval_of_guli_for_yaluo_var
			add = 4
		}
	name = dvg_guliconfed.10.a
	}
}

dvg_guliconfed.11 = { #Yaluo choosing whether or not to let Guli speak a local language
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.11.t
	desc = dvg_guliconfed.11.d
	flavor = dvg_guliconfed.11.f
	
	duration = 2
	
	event_image = {
		video = "gfx/event_pictures/asia_politician_parliament_motion.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	option = { #Approved!
		c:KOO = {
			trigger_event = { id = dvg_guliconfed.12 days = 3 }
		}
		change_variable = {
			name = dvg_yaluo_approval_of_guli_for_yaluo_var
			add = 1
		}
	name = dvg_guliconfed.11.a
	}

	option = { #Denied!
		c:KOO = {
			trigger_event = { id = dvg_guliconfed.13 days = 3 }
		}	
	name = dvg_guliconfed.11.b
	}
}

dvg_guliconfed.12 = { 
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.12.t
	desc = dvg_guliconfed.12.d
	flavor = dvg_guliconfed.12.f
	
	duration = 2
	
	event_image = {
		video = "gfx/event_pictures/asia_politician_parliament_motion.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	option = { 
		change_variable = {
			name = dvg_guli_identity_var
			add = 1
		}
		change_variable = {
			name = dvg_yaluo_approval_of_guli_var
			add = 1
		}
	name = dvg_guliconfed.12.a
	}
}

dvg_guliconfed.13 = {
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.13.t
	desc = dvg_guliconfed.13.d
	flavor = dvg_guliconfed.13.f
	
	duration = 2
	
	event_image = {
		video = "gfx/event_pictures/asia_politician_parliament_motion.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	immediate = {
		set_variable = {
			name = dvg_guli_speaking_mandarin_var
		}
		remove_variable = dvg_guli_speaking_local_language_var
	}
	
	option = {
	name = dvg_guliconfed.13.a
		change_variable = {
			name = dvg_guli_identity_var
			add = -2
		}
	add_journal_entry = {
		type = je_guli_language_mandarin_spreading
		}
	}
}

###RELIGION ON_PULSE EVENTS###

dvg_guliconfed.200 = { #Encourage Buddhism?
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.200.t
	desc = dvg_guliconfed.200.d
	flavor = dvg_guliconfed.200.f
	
	duration = 2
	
	event_image = {
		video = "gfx/event_pictures/asia_politician_parliament_motion.bk2"
	}
	
	trigger = {
		NOT = {
			has_variable = dvg_guli_religion_local_beliefs_event_var
		}
	}
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	option = { #A Unified religion for a unified nation!
		change_variable = {
			name = dvg_guli_religion_full_mahayana_var
			add = 1
		}
		change_variable = {
			name = dvg_guli_identity_var
			add = 1
		}
		name = dvg_guliconfed.200.a
		set_variable = {
			name = dvg_guli_religion_local_beliefs_event_var
		}
		ig:ig_landowners = {
			add_modifier = {
				name = dvg_guli_religion_displeased_and_empowered
				months = short_modifier_time
			}
		}
	}
	
	option = { #Favour no parrty, this issue should be left up to the elders
		change_variable = {
			name = dvg_guli_religion_moderate_var
			add = 1
		}
		name = dvg_guliconfed.200.b
		set_variable = {
			name = dvg_guli_religion_local_beliefs_event_var
		}
		ig:ig_landowners = {
			add_modifier = {
				name = dvg_guli_religion_displeased_and_empowered
				months = short_modifier_time
			}
		}
		ig:ig_devout = {
			add_modifier = {
				name = dvg_guli_religion_displeased_and_empowered
				months = short_modifier_time
			}
		}
	}
	
	option = { #We cannot afford to anger the elders
		change_variable = {
			name = dvg_guli_religion_full_dreamtime_var
			add = 1
		}
		name = dvg_guliconfed.200.c
		set_variable = {
			name = dvg_guli_religion_local_beliefs_event_var
		}
		ig:ig_devout = {
			add_modifier = {
				name = dvg_guli_religion_displeased_and_empowered
				months = short_modifier_time
			}
		}
	}
}

dvg_guliconfed.201 = { #Construction of the Stupa on Berrin (Mount Gambier)
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.201.t
	desc = dvg_guliconfed.201.d
	flavor = dvg_guliconfed.201.f
	
	duration = 2
	
	event_image = {
		video = "gfx/event_pictures/unspecific_politicians_arguing.bk2"
	}

	trigger = {
		NOT = {
			has_variable = dvg_guli_religion_berrin_stupa_var
		}	
	}

	option = { #Find an alternative site
		change_variable = {
			name = dvg_guli_religion_moderate_var
			add = 1
		}
		name = dvg_guliconfed.201.a
		set_variable = {
			name = dvg_guli_religion_berrin_stupa_var
		}
	}
	
	option = { #Permit the construction
		ig:ig_landowners = {
			add_modifier = {
				name = dvg_guli_religion_disturbed_craitbul
				months = short_modifier_time
			}
		}
		ig:ig_devout = {
			add_modifier = {
				name = dvg_guli_religion_berrin_stupa
				months = normal_modifier_time
			}
		}	
		change_variable = {
			name = dvg_guli_religion_full_mahayana_var
			add = 1
		}
		name = dvg_guliconfed.201.b
		set_variable = {
			name = dvg_guli_religion_berrin_stupa_var
		}
		add_radicals = {
			value = 0.05
			cu:aborigine
			rel:animist
		}
	}
}

dvg_guliconfed.202 = { #Dreamtime preservationist society
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.202.t
	desc = dvg_guliconfed.202.d
	flavor = dvg_guliconfed.202.f
	
	duration = 2
	
	event_image = {
		video = "gfx/event_pictures/asia_politician_parliament_motion.bk2"
	}
	
	option = { #Let the society be
		change_variable = {
			name = dvg_guli_religion_moderate_var
			add = 1
		}
		name = dvg_guliconfed.202.a
	}
	
	option = { #Shut it down
		change_variable = {
			name = dvg_guli_identity_var
			add = -1
		}	
		ig:ig_intelligentsia = {
			add_modifier = {
				name = dvg_guli_religion_shut_down_preservationists
				months = normal_modifier_time
			}
		}
		change_variable = {
			name = dvg_guli_religion_full_mahayana_var
			add = 1
		}
		name = dvg_guliconfed.202.b
	}
	
	option = { #Fund it
		change_variable = {
			name = dvg_guli_identity_var
			add = 1
		}		
		ig:ig_intelligentsia = {
			add_modifier = {
				name = dvg_guli_religion_funded_preservationists
				months = normal_modifier_time
			}
		}
		ig:ig_landowners = {
			add_modifier = {
				name = dvg_guli_religion_funded_preservationists
				months = normal_modifier_time
			}
		}
		change_variable = {
			name = dvg_guli_religion_full_dreamtime_var
			add = 1
		}
		name = dvg_guliconfed.202.c
	}
}

dvg_guliconfed.203 = { #Religious Schools event
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.203.t
	desc = dvg_guliconfed.203.d
	flavor = dvg_guliconfed.203.f
	
	duration = 2
	
	event_image = {
		video = "gfx/event_pictures/asia_politician_parliament_motion.bk2"
	}

	trigger = {
		OR = {
			c:KOO = {
				has_variable = dvg_guli_speaking_local_language_var
			}
			c:KOO = {
				has_variable = dvg_guli_speaking_mandarin_var
			}
		}
		c:KOO = {
			has_law = law_type:no_schools
		}
		c:KOO = {
			NOT = {
				OR = {
					is_enacting_law = law_type:law_religious_schools
					is_enacting_law = law_type:law_private_schools
					is_enacting_law = law_type:law_public_schools
				}
			}
		}	
		NOT = {
			has_variable = dvg_guli_religious_education_event_var
		}
	}

	option = {
		activate_law = law_type:religious_schools
		set_variable = {
			name = dvg_guli_religious_education_event_var
		}
		change_variable = {
			name = dvg_guli_religion_full_mahayana_var
			add = 1
		}
	name = dvg_guliconfed.203.a
	}
	
	option = {
		set_variable = {
			name = dvg_guli_religious_education_event_var
		}
		change_variable = {
			name = dvg_guli_religion_full_dreamtime_var
			add = 1
		}
	name = dvg_guliconfed.203.b
	}
	
	option = {
		activate_law = law_type:law_private_schools
		set_variable = {
			name = dvg_guli_religious_education_event_var
		}
		change_variable = {
			name = dvg_guli_religion_moderate_var
			add = 1
		}	
	name = dvg_guliconfed.203.c
	}

}
#Reminder for later:
#If the Yushan Agency modifier is there, fire an event about them spreading that
#Fight in Yushan between a Preservationist and a Buddhist Monk
#Syncretism spreads - moderate event
#If the Mandarin choice was taken, have an event about that where Buddhism spreads quickly - convert animist pops
#If the local language choice was taken, have an event about the documentation of its people's dreamtime beliefs
#Buddhists assist with preservation efforts - only fire if there's a high literacy rate ~30% - moderate event
#Visit from Qingshui monks
#The first all-buddhist tribe

dvg_guliconfed.998 = { #test even for messing around with variables for the JEs
	type = country_event
	placement = ROOT

	title = dvg_guliconfed.9.t
	desc = dvg_guliconfed.9.d
	flavor = dvg_guliconfed.9.f
	
	duration = 2
	
	event_image = {
		video = "unspecific_military_parade"
	}
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	option = {
		change_variable = {
			name = dvg_yaluo_approval_of_guli_var
			add = -2
			#add = 2
		}
	}
}


#dvg_guliconfed.900 = { #the ginger event
#	type = country_event
#	placement = ROOT
#
#	title = dvg_guliconfed.900.t
#	desc = dvg_guliconfed.900.d
#	flavor = dvg_guliconfed.900.f
#	
#	event_image = {
#		video = "europenorthamerica_gold_prospectors"
#	}
#	
#	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
#	
#	duration = 2
#
#	immediate = {
#		set_variable = dvg_fresh_ginger_var
#	}
#
#	trigger = {
#		exists = c:KOO
#		s:STATE_YONGLING.region_state:KOO = {
#			has_building = building_rice_farm
#			level >= 5
#		}
#		NOT = {
#			has_variable = dvg_ginger_fresh
#		}
#	}
#	
#	option = {
#		add_modifier = {
#			name = dvg_fresh_ginger_var
#			months = 61
#			is_decaying = yes
#		}
#		name = dvg_guliconfed.900.a
#	}
#}