namespace = dvg_rheinish_unification

# The conference
dvg_rheinish_unification.10 = {
	type = country_event
	placement = ROOT

	title = dvg_rheinish_unification.10.t
	desc = dvg_rheinish_unification.10.d
	flavor = dvg_rheinish_unification.10.f

	event_image = {
		video = "gfx/event_pictures/unspecific_signed_contract.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/signed_contract"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	duration = 3

	trigger = {
		root.infamy < infamy_threshold:infamous
		exists = c:BEG
		root = c:BEG
		year >= 1852
		any_country = {
			trigger_if = {
				limit = {
					ROOT = {
						country_has_primary_culture = cu:rheinish
					}
				}
				country_has_primary_culture = cu:rheinish
			}
			OR = {
				has_diplomatic_pact = {
					who = ROOT
					type = customs_union
				}
				has_diplomatic_pact = {
					who = c:BRG
					type = customs_union
				}
			}
			OR = {
				is_subject = no
				is_subject_of = ROOT
			}
			country_rank < rank_value:major_power
			relations:root >= relations_threshold:amicable
			is_player = no
			NOT = { has_variable = german_minor_dont_annex }
		}
	}

	option = {
		name = dvg_rheinish_unification.10.a
		default_option = yes

		every_country = {
			if = {
				limit = {
					NOT = { this = ROOT }
					OR = {
						country_has_primary_culture = cu:rheinish
						AND = {
							exists = c:OSN
							this = c:OSN
						}
					}
				}

				save_scope_as = minor_to_annex
				ROOT = {
					annex = scope:minor_to_annex
				}
			}
		}

		change_tag = CFR
	}
}
